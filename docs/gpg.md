# Шифрование переменных окружения

Некоторые данные мы не храним в открытом виде т.к. это не безопастно.
Потому мы шифруем их с помощью OpenPGP

## Настройка

Вот что следует сделать, что бы начать работать с шифрованными переменными

1. Получить ключ с помощью которого будут шифроваться/расшифровываться переменные
2. Импортируешь ключ в систему 
```bash
gpg --allow-secret-key-import --import путь_к_ключу
``` 
3. Проверяем что ключ импортирован
```base
gpg -K | grep politsturm
```
4. Настроить git

```bash
# Это позволит нам видеть diff шифрованного файла
git config diff.gpg.textconv "gpg --no-tty --quiet --decrypt"
```

# Изменение значений в зашифрованном файле окружения
```bash
./etc/scripts/gpg-edit ПУТЬ_К_ШИФРОВАННОМУ_ФАЙЛУ
```

Например

```bash
./etc/scripts/gpg-edit .env.gpg
```

После этого откроется редактор `nano` в котором вам необходимо изменить значения файла и сохранить изменения `Ctrl + O`

# Добавить новый файл

Данная команда зашифрует указанный файл
```bash
gpg -e -r politsturm --output OUTPUT_FILE ORIGINAL_FILE

```
Например
```bash
gpg -e -r politsturm --output .env_passwords.gpg .env_passwords
```